package ar.edu.unlam.tallerweb1.persistencia;

import ar.edu.unlam.tallerweb1.SpringTest;
import org.junit.Test;
import org.springframework.test.annotation.Rollback;
import org.springframework.transaction.annotation.Transactional;
import static org.assertj.core.api.Assertions.*;//importa todos los metodos estaticos de la clase assert
import org.hibernate.Session;

import ar.edu.unlam.tallerweb1.modelo.*;

public class TestJugador extends SpringTest{
	
	@Test@Transactional@Rollback
	public void testGuardarJugador() {
		
		Equipo nuevoEquipo = new Equipo();
		nuevoEquipo.setNombre("River");
		nuevoEquipo.setCantJugadores(11);
		Jugador miJugador = new Jugador();
		miJugador.setNombre("Pepe");
		miJugador.setEquipo(nuevoEquipo);
		
		Session session = getSession();
		session.save(nuevoEquipo);
		session.save(miJugador);
		
		Jugador buscado = session.get(Jugador.class, miJugador.getId());
		assertThat(buscado.getEquipo().getNombre()).isEqualTo("River");
		
		Equipo equipoBuscado = session.get(Equipo.class, miJugador.getEquipo().getId());
		assertThat(equipoBuscado.getNombre()).isEqualTo("River");
		
				
		
		
	}
}